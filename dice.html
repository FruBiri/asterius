<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dice Roller</title>
  <style>
    body {
      font-family: sans-serif;
      background-color: #f4f4f4;
      padding: 2rem;
    }

    h1 {
      text-align: center;
    }

    table {
      margin: 0 auto 1rem auto;
      border-collapse: collapse;
    }

    td {
      padding: 0.5rem;
      text-align: center;
    }

    button {
      padding: 0.2rem 0.5rem;
      font-size: 0.8rem;
    }

    .count-box {
      min-width: 2rem;
      display: inline-block;
    }

    .roller-row {
      font-weight: bold;
    }

    .roller-d4 { color: #d66f6f; }
    .roller-d6 { color: #d6894f; }
    .roller-d8 { color: #d6c14f; }
    .roller-d10 { color: #6fd66f; }
    .roller-d12 { color: #4fd6c1; }
    .roller-d20 { color: #4f6fd6; }
    .roller-d100 { color: #a04fd6; }

    #result {
      text-align: center;
      font-size: 1.2rem;
      margin-top: 1rem;
    }
  </style>
</head>
<body>
  <h1>Dice Roller</h1>
  <table id="diceTable">
    <!-- Dice rows -->
    <tr class="roller-row">
      <td class="roller-d4">d4</td>
      <td><button onclick="changeCount('d4', -1)">−</button></td>
      <td><span id="count-d4" class="count-box">0</span></td>
      <td><button onclick="changeCount('d4', 1)">+</button></td>
    </tr>
    <tr class="roller-row">
      <td class="roller-d6">d6</td>
      <td><button onclick="changeCount('d6', -1)">−</button></td>
      <td><span id="count-d6" class="count-box">0</span></td>
      <td><button onclick="changeCount('d6', 1)">+</button></td>
    </tr>
    <tr class="roller-row">
      <td class="roller-d8">d8</td>
      <td><button onclick="changeCount('d8', -1)">−</button></td>
      <td><span id="count-d8" class="count-box">0</span></td>
      <td><button onclick="changeCount('d8', 1)">+</button></td>
    </tr>
    <tr class="roller-row">
      <td class="roller-d10">d10</td>
      <td><button onclick="changeCount('d10', -1)">−</button></td>
      <td><span id="count-d10" class="count-box">0</span></td>
      <td><button onclick="changeCount('d10', 1)">+</button></td>
    </tr>
    <tr class="roller-row">
      <td class="roller-d12">d12</td>
      <td><button onclick="changeCount('d12', -1)">−</button></td>
      <td><span id="count-d12" class="count-box">0</span></td>
      <td><button onclick="changeCount('d12', 1)">+</button></td>
    </tr>
    <tr class="roller-row">
      <td class="roller-d20">d20</td>
      <td><button onclick="changeCount('d20', -1)">−</button></td>
      <td><span id="count-d20" class="count-box">0</span></td>
      <td><button onclick="changeCount('d20', 1)">+</button></td>
    </tr>
    <tr class="roller-row">
      <td class="roller-d100">d100</td>
      <td><button onclick="changeCount('d100', -1)">−</button></td>
      <td><span id="count-d100" class="count-box">0</span></td>
      <td><button onclick="changeCount('d100', 1)">+</button></td>
    </tr>

    <!-- Flat modifier row moved to bottom -->
    <tr class="roller-row">
      <td colspan="1"><strong>Flat Mod</strong></td>
      <td><button onclick="changeModifier(-1)">−</button></td>
      <td><span id="modifier" class="count-box">0</span></td>
      <td><button onclick="changeModifier(1)">+</button></td>
    </tr>

    <!-- Roll button -->
    <tr>
      <td colspan="4">
        <button onclick="rollDice()">Roll</button>
      </td>
    </tr>
  </table>

  <div id="result"></div>

  <script>
    const diceTypes = ['d4', 'd6', 'd8', 'd10', 'd12', 'd20', 'd100'];
    const diceColors = {
      d4: 'roller-d4',
      d6: 'roller-d6',
      d8: 'roller-d8',
      d10: 'roller-d10',
      d12: 'roller-d12',
      d20: 'roller-d20',
      d100: 'roller-d100'
    };

    let modifier = 0;

    function changeCount(die, amount) {
      const countSpan = document.getElementById(`count-${die}`);
      let current = parseInt(countSpan.textContent);
      current = Math.max(0, current + amount);
      countSpan.textContent = current;
    }

    function changeModifier(amount) {
      modifier += amount;
      document.getElementById('modifier').textContent = modifier;
    }

    function rollDie(sides) {
      return Math.floor(Math.random() * sides) + 1;
    }

    
function rollDice() {
  let total = 0;
  const diceBreakdown = [];

  diceTypes.forEach(die => {
    const count = parseInt(document.getElementById(`count-${die}`).textContent);
    const sides = parseInt(die.replace('d', ''));
    for (let i = 0; i < count; i++) {
      const result = rollDie(sides);
      total += result;
      diceBreakdown.push(`<span class="${diceColors[die]}">${result}</span>`);
    }
  });

  // Apply modifier
  total += modifier;

  // Create modifier string separately
  let modifierString = '';
  if (modifier !== 0) {
    const modSign = modifier > 0 ? '+' : '-';
    modifierString = `<span class="roller-mod">${modSign} ${Math.abs(modifier)}</span>`;
  }

  // Build the sum display
  let sumDisplay = '';
  if (diceBreakdown.length || modifier !== 0) {
    sumDisplay = '(' + diceBreakdown.join(' + ');
    if (modifierString) {
      sumDisplay += ' + ' + modifierString;
    }
    sumDisplay += ')';
  }

  document.getElementById('result').innerHTML = `<strong>Sum: ${total}</strong> ${sumDisplay}`;
}

      
  </script>
</body>
</html>
